@model prjJapanTravel_BackendMVC.ViewModels.ShipmentViewModels.RouteDetailViewModel

<!-- 使用容器來包含航線資訊和圖片區塊 -->
<div style="overflow: hidden;">
    <!-- 第一部分：顯示 Route 的基本資料 -->
    <div style="width: 60%; float: left;">
        <h2>航線資訊</h2>
        <p>出發港口: @Model.OriginPortName</p>
        <p>目的港口: @Model.DestinationPortName</p>
        <p>價格: @Model.Price</p>
        <p>航線描述: @Model.RouteDescription</p>
    </div>

    <!-- 圖片區塊，設置為浮動在右側 -->
    <div style="width: 100%; overflow: auto;">
        <h3>圖片</h3>
        <p>
            <a asp-action="ICreate" asp-route-routeId="@Model.RouteId" class="btn btn-primary">新增圖片</a>
        </p>
        @if (Model.Images != null && Model.Images.Count > 0)
        {
            @for (int i = 0; i < Model.Images.Count; i++)
            {
                if (Model.Images[i] != null)
                {
                    <div style="display: inline-block; margin-right: 10px; text-align: center;">
                        <img src="data:image/jpeg;base64,@Convert.ToBase64String(Model.Images[i])" alt="Route Image" style="width: 200px; height: auto;" />
                        <p>圖片描述: @(string.IsNullOrEmpty(Model.ImageDescriptions[i]) ? "無圖片描述" : Model.ImageDescriptions[i])</p>
                        <p>
                            @Html.ActionLink("修改", "IEdit", new { id = Model.RouteImageId }) |
                            @Html.ActionLink("刪除", "IDelete", new { id = Model.RouteImageId }, new { onclick = "return confirm('確定要刪除這張圖片嗎？')" })
                        </p>
                    </div>
                }
                else
                {
                    <p>無圖片</p>
                }
            }
        }
        else
        {
            <p>無圖片</p>
        }

    </div>




</div>

<!-- 清除浮動 -->
<div style="clear: both;"></div>

<!-- 第二部分：列出所有相關的 Schedule 資料 -->
<h3>航班資訊</h3>
<p>
    @Html.ActionLink("新增航班", "SCreate", "Shipment", new { routeId = Model.RouteId }, null)
</p>
@if (Model.Schedules != null && Model.Schedules.Count > 0)
{
    
    <table class="table">
        <thead>
            <tr>
                <th>序號</th>
                <th>出發時間</th>
                <th>抵達時間</th>
                <th>剩餘座位</th>
                <th>總座位數</th>
                <th>操作</th>
            </tr>
        </thead>

        <tbody>
            @{
                int count = 0;
                foreach (var item in Model.Schedules)
                {
                    count++;
                    <tr>
                        <td>@count</td>
                        <td>@item.DepartureTime</td>
                        <td>@item.ArrivalTime</td>
                        <td>@item.Seats</td>
                        <td>@item.Capacity</td>
                        <td>
                            @Html.ActionLink("修改", "SEdit", "Shipment", new { routeId = Model.RouteId, scheduleId = item.ScheduleId }, null) |
                            @Html.ActionLink("刪除", "SDelete", "Shipment", new { id = item.ScheduleId }, new { onclick = "return confirm('確定要刪除嗎')" })
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
}
else
{
    <p>此航線無航班資訊。</p>
}
@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
